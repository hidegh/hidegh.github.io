<!DOCTYPE html>
<html lang="en-US" data-bs-theme="dark">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <meta http-equiv="Cache-Control" content="max-age=3600, must-revalidate">
        <meta http-equiv="Pragma" content="no-cache">
        <meta http-equiv="Expires" content="-1">

        <title>Enable Google Page Views | Reflective Tech Consulting For Succesful Projects</title>
        <meta name="title" content="Enable Google Page Views | Reflective Tech Consulting For Succesful Projects">
        <meta name="description" content="Helping others with useful content | samples, google analytics, pageviews, CTO, Fractional, Fractional CTO, CTO as a Service, Leadership, Technical Leadership, Fractional Leadership, Affordable Tech Leadership, Affordable Technical Leadership, Strategy, Strategic Leadership, Consultation, Tech Consultation, Technical Consultation, Health Check, Precision Tech Audit, Due Diligence Code Audit, Outsourcing, Nearshoring, Offshoring, Vendor Management, Team Management, Team Mentoring, Entrepreneurs, CEOs, Founders, SMEs, Startups, Software Engineering, Boring Companies, Boring Technology, MVP, Minimum Viable Project, Procuct Market Fit, Software Architecture, Software Development, Tech Debt, Technical Debt, Programming Debt, Best Practices, Simple Approach, Near-to-zero Maintenance, SimplyPut Consulting">
        <meta name="keywords" content="samples, google analytics, pageviews, CTO, Fractional, Fractional CTO, CTO as a Service, Leadership, Technical Leadership, Fractional Leadership, Affordable Tech Leadership, Affordable Technical Leadership, Strategy, Strategic Leadership, Consultation, Tech Consultation, Technical Consultation, Health Check, Precision Tech Audit, Due Diligence Code Audit, Outsourcing, Nearshoring, Offshoring, Vendor Management, Team Management, Team Mentoring, Entrepreneurs, CEOs, Founders, SMEs, Startups, Software Engineering, Boring Companies, Boring Technology, MVP, Minimum Viable Project, Procuct Market Fit, Software Architecture, Software Development, Tech Debt, Technical Debt, Programming Debt, Best Practices, Simple Approach, Near-to-zero Maintenance, SimplyPut Consulting">
        <meta name="author" content="sille_bille">
        <meta name="robots" content="index, follow">

        <link rel="canonical" href="https://reflectivetechconsulting.com//post-sample/enable-google-page-views/">
        <link rel="shortcut icon" type="image/png" href="/assets/reflection logo.ico">
        
        <link rel="preconnect" href="cdnjs.cloudflare.com">
        <link rel="dns-prefetch" href="cdnjs.cloudflare.com">

        <link rel="preconnect" href="cdn.jsdelivr.net">
        <link rel="dns-prefetch" href="cdn.jsdelivr.net">

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

        
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" integrity="sha256-2TnSHycBDAm2wpZmgdi0z81kykGPJAkiUY+Wf97RbvY=" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js" integrity="sha256-gOQJIa9+K/XdfAuBkg2ONAdw5EnQbokw/s2b8BqsRFg=" crossorigin="anonymous"></script>

        <script src="/assets/js/custom/clipboard-copy.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/ejs@3.1.6/ejs.min.js" integrity="sha256-mOsgtygNfXBUPc/+cc19yr+g0jieqYOgRL5xFD2sC0Y=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.9/lunr.min.js" integrity="sha512-4xUl/d6D6THrAnXAwGajXkoWaeMNwEKK4iNfq5DotEbLPAfk6FSxSP3ydNxqDgCw1c/0Z1Jg6L8h2j+++9BZmg==" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/he/1.2.0/he.min.js" integrity="sha512-PEsccDx9jqX6Dh4wZDCnWMaIO3gAaU0j46W//sSqQhUQxky6/eHZyeB3NrXD2xsyugAKd4KPiDANkcuoEa2JuA==" crossorigin="anonymous"></script>
        
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-okaidia.min.css" integrity="sha512-mIs9kKbaw6JZFfSuo+MovjU+Ntggfoj8RwAmJbVXQ5mkAX5LlgETQEweFPI18humSPHymTb5iikEOKWF7I8ncQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />

        <link rel="stylesheet" href="/assets/css/main.css" />

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jarallax@2.0.4/dist/jarallax.css" integrity="sha256-/a0I9OFWuIXZRhqSuqIj8g0NUYSID+mwuyOuuFZb12A=" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/jarallax@2.0.4/dist/jarallax.min.js" integrity="sha256-uCknJLYMrtYTPwl8PwQnFj6T6Hck2oSGEZLhMi1BRvU=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/jarallax@2.0.4/dist/jarallax-video.min.js" integrity="sha256-zYuE44YyKYv3Y4xv38UkxBY4jFCzAmAxwJ2nfRj16WI=" crossorigin="anonymous"></script>
        <script>
            function InitParallax() {
                jarallax(document.querySelectorAll('.jarallax'), {
                    speed: 0.2, 
                    disableVideo: /iPad|iPhone|iPod|Android/
                });
            }
        </script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/typed.js/2.0.12/typed.min.js" integrity="sha512-3J8teBiHrSyaaRBajZyIEtpDsXdPq1gsznKWIVb5CnorQuFhjWGhWe54z8YNnHHr7MZuExb9m5kvf964HiT1Sw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script>
            function InitTyped() {
                // sample:
                // <span class="text-success">ever created for
                //   <span data-typed='{"strings": ["developers.", "founders.", "designers."]}'></span>
                //   <span class="typed-cursor typed-cursor--blink" aria-hidden="true">|</span>
                // </span>
                document.querySelectorAll("[data-typed]").forEach(e => {
                    const t = {
                        typeSpeed: 40,
                        backSpeed: 10,
                        backDelay: 2e3,
                        loop: true,
                        replaceBaseText : true, /* future feature */
                        autoInsertCss: true,
                        ...e.dataset.typed ? JSON.parse(e.dataset.typed) : {}
                    };

                    var typed = new Typed(e, t);
                });
            }         
        </script>

        
        <script src="https://cdn.jsdelivr.net/npm/wowjs@1.1.3/dist/wow.min.js" integrity="sha256-gHiUEskgBO+3ccSDRM+c5+nEwTGp64R99KYPfITpnuo=" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" integrity="sha256-X7rrn44l1+AUO65h1LGALBbOc5C5bOstSYsNlv9MhT8=" crossorigin="anonymous">
        <script>
            function InitAOS() {
                new WOW({ animateClass: 'animate__animated' }).init();
            }
        </script>

        <script src="https://cdn.jsdelivr.net/npm/@srexi/purecounterjs/dist/purecounter_vanilla.js"></script>
        <script>
            function InitCounters() {
                new PureCounter();
            }
        </script>
        
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.2.0/dist/css/glightbox.min.css" integrity="sha256-bT9i1NF5afnHDpQ4z2cQBHJQGehoEj8uvClaAG+NXS0=" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/glightbox@3.2.0/dist/js/glightbox.min.js" integrity="sha256-A9/h+86SqfF/zRoVASE72CDQUKsIXDOEGasGo2MclFk=" crossorigin="anonymous"></script>
        <script>
            function InitLightbox() {
                GLightbox({});
            }
        </script>

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tiny-slider@2.9.4/dist/tiny-slider.css">
        <script src="https://cdn.jsdelivr.net/npm/tiny-slider@2.9.4/dist/min/tiny-slider.min.js"></script>
        <style>
        
            .tns-nav {
                text-align: center;
                margin: 1em 0;
            }

            .tns-nav > [aria-controls] {
                width: .5em;
                height: .5em;
                padding: 0;
                margin: .5em .25em;                
                border: 0;
                border-radius: 50%;
                background: var(--bs-gray);
            }

            .tns-nav > .tns-nav-active { 
                background: var(--bs-gray-dark); 
            }

        </style>
        <!--
        Possibilities:
        - bootstrap carousel (1 item visible)
        - css carousel https://codepen.io/medrupaloscil/pen/OJNrLLX
        - vanilla JS: keen-slider, swiper, tiny-slider, glider
        - jQuery carousel: slick-carousel, glidejs
        -->
        <script>
            function InitCarousel(selector, options) {
                var carousel = tns({
                    container: selector,
                    ...options
                });
            }
        </script>
        
        
    </head>
    <body class="fit-height">

        <!-- cookie consent script -->
        <!--
NOTE:
    ConsentStatus.enabled is set if no cookie consent is required (globals.cookieConsent.required)...
    ...otherwise ConsentStatus.default is the default value until consent is not given or denied!
-->
<script>
    const CookieConsent = {

        StatusEnum: {
            "default": "default",
            "enabled": "enabled",
            "disabled": "disabled"
        },

        loadScripts: function (requireConsent, consentUrl) {
            if (requireConsent) {
                // scripts managed based on consent status
                this._initializeCookieConsent(consentUrl);
            } else {
                // all scripts enabled
                this._enableCookies();
            }
        },

        getStatus() {
            return localStorage.cookies ?? this.StatusEnum.default;
        },

        _setStatus(value) {
            const changed = this.getStatus() != value;
            localStorage.cookies = value;
            if (changed) window.location.reload();
        },

        _defaultCookies: function () {
            console.log('default cookies');
            this._setStatus(this.StatusEnum.default);
        },

        _enableCookies: function () {
            console.log('enabled cookies');
            this._setStatus(this.StatusEnum.enabled);
        },

        _disableCookies: function () {
            console.log('disabled cookies');
            this._setStatus(this.StatusEnum.disabled);
        },

        _initializeCookieConsent: function (consentUrl) {

            const me = this;

            window.cookieconsent.initialise({
                "palette": {
                    "popup": {
                        "background": "#aa0000",
                        "text": "#ffdddd"
                    },
                    "button": {
                        "background": "#ff0000"
                    }
                },
                "theme": "edgeless",
                "position": "bottom-right",
                "type": "opt-in",
                "content": {
                    "message": "This website uses cookies to ensure you get the best experience here.",
                    "href": consentUrl
                },

                onInitialise: function (status) {
                    console.log(`cc - onInitialise, status: ${status}`);

                    var type = this.options.type;
                    var didConsent = this.hasConsented();
                    
                    if (type == 'opt-in' && didConsent) {
                        me._enableCookies();
                    }
                    else if (type == 'opt-out' && !didConsent) {
                        me._disableCookies();
                    }
                    else {
                        me._defaultCookies();
                    }
                },

                onStatusChange: function (status, chosenBefore) {
                    console.log(`cc - onStatusChange, status: ${status}, chosenBefore: ${chosenBefore}`);

                    var type = this.options.type;
                    var didConsent = this.hasConsented();

                    if (type == 'opt-in' && didConsent) {
                        me._enableCookies();
                    }
                    if (type == 'opt-out' && !didConsent) {
                        me._disableCookies();
                    }
                },

                onRevokeChoice: function () {
                    // NOTE: this hook is called immediately after the revoke button is clicked and removes previous answers
                    console.log(`cc - onRevokeChoice`);

                    var type = this.options.type;

                    if (type == 'opt-in') {
                        me._disableCookies();

                        // NOTE: we need to reload page, so that we get rid of the loaded GA / Disqus scripts!
                        location.reload();
                    }
                    if (type == 'opt-out') {
                        me._enableCookies();
                    }
                },

                onPopupOpen: function () {
                    console.log(`cc - onPopupOpen`);
                },

                onPopupClose: function () {
                    console.log(`cc - onPopupClose`);
                }

            });

        }

    };
</script>


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.css" integrity="sha512-LQ97camar/lOliT/MqjcQs5kWgy6Qz/cCRzzRzUCfv0fotsCTC9ZHXaPQmJV8Xu/PVALfJZ7BDezl5lW3/qBxg==" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.js" integrity="sha512-yXXqOFjdjHNH1GND+1EO0jbvvebABpzGKD66djnUfiKlYME5HGMUJHoCaeE4D5PTG2YsSJf6dwqyUUvQvS0vaA==" crossorigin="anonymous"></script>
<script>
    const requireConsent = JSON.parse('true');
    const consentUrl = '/cookies.html';  
    CookieConsent.loadScripts(requireConsent, consentUrl);
</script>


        <header class="sticky-top">
            <nav id="navbar-main" class="navbar-main navbar navbar-expand-lg">

    <div class="container">

        <a class="navbar-brand d-flex align-items-center" href="/">
            <div class="d-flex flex-column">
                <img src="/assets/reflection logo.png" />
                <span class="navbar-brand-subtitle align-self-center">ReflectiveTechConsulting.Com</span>
            </div>
        </a>

        <div class="ms-auto mx-2"></div>

        <!-- standalone search bar activator (below navigation) -->
        <a type="button" role="button" class="btn border-0 me-2 d-lg-none"
            data-bs-toggle="collapse" data-bs-target="#blog-search-bar">
            <!-- d-sm-none = hide if above sm -->
            <i class="fa-solid fa-magnifying-glass"></i>
        </a>

        <button type="button" class="btn navbar-toggler"
            data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
            aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <!-- Using navbar-toggler fix in main.scss and FA icons instead of: <span class="navbar-toggler-icon"></span> -->
            <i class="fa-solid fa-bars"></i>
        </button>

        <div class="collapse navbar-collapse" id="navbarNavDropdown">

            <ul class="navbar-nav d-flex flex-row flex-wrap align-items-center bd-navbar-nav pt-2 py-sm-0 px-5 w-100">
               
                
                <!--
    The navigation menu should always use CURRENT www version links (for this there's no _v* segment) !
-->
<li class="nav-item col-6 col-lg-auto">
    <a class="nav-link default p-2" href="/"><i class="fa-solid fa-house"></i></a>
</li>

<li class="nav-item col-6 col-lg-auto">
    <a class="nav-link p-2" href="/www/services">Services</a>
</li>

<li class="nav-item col-6 col-lg-auto">
    <a class="nav-link p-2" href="/www/projects">Projects & More</i></a>
</li>

<li class="nav-item col-6 col-lg-auto">
    <a class="nav-link p-2" href="/www/fcto">F-CTO</a>
</li>

<!--
<li class="nav-item col-6 col-lg-auto">
    <a class="nav-link p-2" href="/www/about-me">About Me</a>
</li>
-->

                <div class="ms-auto mx-2"></div>

                <li class="nav-item dropdown col-12 col-lg-auto">
                    <hr class="d-block d-lg-none" />
                    <a class="d-inline-flex nav-link p-2" href="/posts/1/">Posts</a>
                    <a class="d-inline-flex nav-link no-dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-bs-hover="dropdown" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="fa-solid fa-angles-down"></i>
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                        <li><a class="dropdown-item" href="/tags">Tags</a></li>
                        <li><a class="dropdown-item" href="/categories">Categories</a></li>
                        <li><a class="dropdown-item" href="/series">Series</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="/tag-cloud">Tags cloud</a></li>
                    </ul>
                </li>      

            </ul>

        </div>

        <!-- inline search-bar with same expand breakpoint as navigation -->
        <nav class="nav-search d-none d-lg-inline">
            <!-- hidden by def., visible (block) aft. size SM -->
            <div class="inline-input-group inline-text-right">
                <span class="inline-text"><i class="fa-solid fa-magnifying-glass"></i></span>
                <input type="text" class="blog-search-input form-control py-0" placeholder="Search...">
            </div>
        </nav>

    </div>

</nav>

<!-- 
standalone search bar (below navigation) with same breakpoint as navigation (shown on collapse)
d-sm-none = hide if above sm
-->
<nav class="nav-search-below d-lg-none collapse" id="blog-search-bar">
    <div class="container">
        <div class="p-3">
            <div class="inline-input-group inline-text-left">
                <span class="inline-text"><i class="fa-solid fa-magnifying-glass"></i></span>
                <input type="text" class="blog-search-input form-control" placeholder="Search...">
            </div>
        </div>
    </div>
</nav>
        </header>

        <main>
            
            

    <div class="layout layout-post">
     
        <div class="content-container container">

            <div class="hide-if-search-results-container-is-displayed row">

                <section class="article-section col-12 col-xl-9 overflow-hidden">
               
                    <header></header>
                    <article>
                        

    
    
    
    <section class="d-flex justify-content-end align-items-center d-hide-if-empty">
        

<section class="share-wrapper">
    <span class="share-label text-body-secondary mr-1">Share post</span>
    <span class="share-icons">
        
               
        
            
                
                <a  href="https://www.linkedin.com/sharing/share-offsite/?url=/post-sample/enable-google-page-views/"
                    data-toggle="tooltip"
                    data-placement="top"
                    title="LinkedIn"
                    target="_blank" rel="noopener"
                    aria-label="LinkedIn"
                    >
                    <i class="fa-fw fa-brands fa-linkedin fa-fw"></i>
                </a>
            
        
            
        
            
                
                <a  href="https://twitter.com/intent/tweet?text=Share post&amp;url=/post-sample/enable-google-page-views/"
                    data-toggle="tooltip"
                    data-placement="top"
                    title="Twitter"
                    target="_blank" rel="noopener"
                    aria-label="Twitter"
                    >
                    <i class="fa-fw fa-brands fa-square-twitter fa-fw"></i>
                </a>
            
        
            
        
            
        
            
        
        
        <a href onclick="copyLink(); return false;" data-toggle="tooltip" data-placement="top" title="Copy link">
            <i class="fa-solid fa-link fa-fw small"></i>
        </a>
    </span>
</section>

<script>
    function copyLink(url) {

        if (!url || 0 === url.length)
            url = window.location.href;

        ClipboardCopy.copy(
            url,
            () => { alert("Link copied successfully!"); },
            (err) => { alert("Link copy failed! Error: ", err); },
        );
    }
</script>


    </section>
    
    <section class="article print-container">

        <section>
            <h1>Enable Google Page Views</h1>
            
        </section>
    
        <section class="taxonomy small d-xl-flex gap-3 pb-3">
<div class="d-flex">
    <div class="d-inline-block me-1">
        <a href="/categories"><i class="fa-regular fa-fw fa-folder-open text-body-secondary"></i></a>
    </div>
    <div class="d-inline-block">
        
        
        <a href="/category/s/a/m/p/l/e/s/1/" class="me-1">
                
            S
                
             - a
                
             - m
                
             - p
                
             - l
                
             - e
                
             - s
            
        </a>
        
        
        <a href="/category/j/e/k/y/l/l//c/h/i/r/p/y/1/" class="me-1">
                
            J
                
             - e
                
             - k
                
             - y
                
             - l
                
             - l
                
             - -
                
             - C
                
             - h
                
             - i
                
             - r
                
             - p
                
             - y
            
        </a>
        
    </div>
</div>

<div class="d-flex">
    <div class="d-inline-block me-1">
        <a href="/tags"><i class="fa-solid fa-fw fa-tags text-body-secondary"></i></a>
    </div>
    <div class="d-inline-block">
        
        <a href="/tag/samples/1/" class="me-1">samples</a>
        
        <a href="/tag/google-analytics/1/" class="me-1">google analytics</a>
        
        <a href="/tag/pageviews/1/" class="me-1">pageviews</a>
        
    </div>
</div>
</section>

        <section class="small pb-3">
            <div><span class="text-body-secondary">Posted</span> Invalid DateTime</div>
            <div class="d-xl-flex justify-content-start gap-3">
                <div><span class="text-body-secondary">By</span> sille_bille</div>
                <div class="ms-auto">5 min <span class="text-body-secondary">reading time</span></div>
            </div>
        </section>

        <hr class="m-1" />

        <section class="pb-3">
            
            <blockquote>
<p>The content of this post applies only to <a href="https://support.google.com/analytics/answer/10220206"><em>Universal Analytics property</em></a> (UA), not <a href="https://support.google.com/analytics/answer/10089681"><em>Google Analytics 4</em></a> (GA 4). In addition, since <a href="https://support.google.com/analytics/answer/11583528">UA is about to be deprecated on Jul 1, 2023</a>, the Page Views feature of <a href="https://github.com/cotes2020/jekyll-theme-chirpy/"><em>Chirpy</em></a> will also be deprecated at that time.
{: .prompt-danger }</p>
</blockquote>
<p>This post is to enable Page Views on the <a href="https://github.com/cotes2020/jekyll-theme-chirpy/"><strong>Chirpy</strong></a> theme based blog that you just built. This requires technical knowledge and it’s recommended to keep the <code>google_analytics.pv.*</code> empty unless you have a good reason. If your website has low traffic, the page views count would discourage you to write more blogs. With that said, let’s start with the setup.</p>
<h2 id="set-up-google-analytics" tabindex="-1">Set up Google Analytics</h2>
<h3 id="create-ga-account-and-property" tabindex="-1">Create GA account and property</h3>
<p>First, you need to set up your account on Google analytics. While you create your account, you must create your first <strong>Property</strong> as well.</p>
<ol>
<li>Head to <a href="https://analytics.google.com/">https://analytics.google.com/</a> and click on <strong>Start Measuring</strong></li>
<li>Enter your desired <em>Account Name</em> and choose the desired checkboxes</li>
<li>Enter your desired <em>Property Name</em>. This is the name of the tracker project that appears on your Google Analytics dashboard</li>
<li>Enter the required information <em>About your business</em></li>
<li>Hit <em>Create</em> and accept any license popup to set up your Google Analytics account and create your property</li>
</ol>
<h3 id="create-data-stream" tabindex="-1">Create Data Stream</h3>
<p>With your property created, you now need to set up Data Stream to track your blog traffic. After you signup, the prompt should automatically take you to create your first <strong>Data Stream</strong>. If not, follow these steps:</p>
<ol>
<li>Go to <strong>Admin</strong> on the left column</li>
<li>Select the desired property from the drop-down on the second column</li>
<li>Click on <strong>Data Streams</strong></li>
<li>Add a stream and click on <strong>Web</strong></li>
<li>Enter your blog’s URL</li>
</ol>
<p>It should look like this:</p>
<p><img src="/posts/20210103/01-google-analytics-data-stream.png" alt="google-analytics-data-stream">{: width=“1086” height=“542”}</p>
<p>Now, click on the new data stream and grab the <strong>Measurement ID</strong>. It should look something like <code>G-V6XXXXXXXX</code>. Copy this to your <code>_config.yml</code>{: .filepath} file:</p>
<pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">google_analytics</span><span class="token punctuation">:</span><br>  <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token string">'G-V6XXXXXXX'</span>   <span class="token comment"># fill in your Google Analytics ID</span><br>  <span class="token comment"># Google Analytics pageviews report settings</span><br>  <span class="token key atrule">pv</span><span class="token punctuation">:</span><br>    <span class="token key atrule">proxy_endpoint</span><span class="token punctuation">:</span>   <span class="token comment"># fill in the Google Analytics superProxy endpoint of Google App Engine</span><br>    <span class="token key atrule">cache_path</span><span class="token punctuation">:</span>       <span class="token comment"># the local PV cache data, friendly to visitors from GFW region</span></code></pre>
<p>{: file=“_config.yml”}</p>
<p>When you push these changes to your blog, you should start seeing the traffic on your Google Analytics. Play around with the Google Analytics dashboard to get familiar with the options available as it takes like 5 mins to pick up your changes. You should now be able to monitor your traffic in real time.</p>
<p><img src="/posts/20210103/02-google-analytics-realtime.png" alt="google-analytics-realtime">{: width=“616” height=“557”}</p>
<h2 id="setup-page-views" tabindex="-1">Setup Page Views</h2>
<p>There is a detailed <a href="https://developers.google.com/analytics/solutions/google-analytics-super-proxy">tutorial</a> available to set up Google Analytics superProxy. But, if you are interested to just quickly get your Chirpy-based blog display page views, follow along. These steps were tested on a Linux machine. If you are running Windows, you can use the Git bash terminal to run Unix-like commands.</p>
<h3 id="setup-google-app-engine" tabindex="-1">Setup Google App Engine</h3>
<ol>
<li>
<p>Visit <a href="https://console.cloud.google.com/appengine">https://console.cloud.google.com/appengine</a></p>
</li>
<li>
<p>Click on <strong>Create Application</strong></p>
</li>
<li>
<p>Click on <strong>Create Project</strong></p>
</li>
<li>
<p>Enter the name and choose the data center close to you</p>
</li>
<li>
<p>Select <strong>Python</strong> language and <strong>Standard</strong> environment</p>
</li>
<li>
<p>Enable billing account. Yeah, you have to link your credit card. But, you won’t be billed unless you exceed your free quota. For a simple blog, the free quota is more than sufficient.</p>
</li>
<li>
<p>Go to your App Engine dashboard on your browser and select <strong>API &amp; Services</strong> from the left navigation menu</p>
</li>
<li>
<p>Click on <strong>Enable APIs and Services</strong> button on the top</p>
</li>
<li>
<p>Enable the following APIs: <em>Google Analytics API</em></p>
</li>
<li>
<p>On the left, Click on <em>OAuth Consent Screen</em> and accept <strong>Configure Consent Screen</strong>. Select <strong>External</strong> since your blog is probably hosted for the public. Click on <strong>Publish</strong> under <em>Publishing Status</em></p>
</li>
<li>
<p>Click on <strong>Credentials</strong> on the left and create a new <strong>OAuth Client IDs</strong> credential. Make sure to add an entry under <code>Authorized redirect URIs</code> that matches: <code>https://&lt;project-id&gt;.&lt;region&gt;.r.appspot.com/admin/auth</code></p>
</li>
<li>
<p>Note down the <strong>Your Client ID</strong> and <strong>Your Client Secret</strong>. You’ll need this in the next section.</p>
</li>
<li>
<p>Download and install the cloud SDK for your platform: <a href="https://cloud.google.com/sdk/docs/quickstart">https://cloud.google.com/sdk/docs/quickstart</a></p>
</li>
<li>
<p>Run the following commands:</p>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">[</span>root@bc96abf71ef8 /<span class="token punctuation">]</span><span class="token comment"># gcloud init</span><br><br>~snip~<br><br>Go to the following <span class="token function">link</span> <span class="token keyword">in</span> your browser:<br><br>    https://accounts.google.com/o/oauth2/auth?response_type<span class="token operator">=</span>code<span class="token operator">&amp;</span><span class="token assign-left variable">client_id</span><span class="token operator">=</span>XYZ.apps.googleusercontent.com<span class="token operator">&amp;</span><span class="token assign-left variable">redirect_uri</span><span class="token operator">=</span>ABCDEFG<br><br>Enter verification code: <span class="token operator">&lt;</span>VERIFICATION CODE THAT YOU GET AFTER YOU VISIT AND AUTHENTICATE FROM THE ABOVE LINK<span class="token operator">></span><br><br>You are logged <span class="token keyword">in</span> as: <span class="token punctuation">[</span>blah_blah@gmail.com<span class="token punctuation">]</span>.<br><br>Pick cloud project to use:<br><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> chirpy-test-300716<br><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> Create a new project<br>Please enter numeric choice or text value <span class="token punctuation">(</span>must exactly match list<br>item<span class="token punctuation">)</span>: <span class="token number">1</span><br><br><br><span class="token punctuation">[</span>root@bc96abf71ef8 /<span class="token punctuation">]</span><span class="token comment"># gcloud info</span><br><span class="token comment"># Your selected project info should be displayed here</span></code></pre>
</li>
</ol>
<h3 id="setup-google-analytics-superproxy" tabindex="-1">Setup Google Analytics superProxy</h3>
<ol>
<li>
<p>Clone the <strong>Google Analytics superProxy</strong> project on Github: <a href="https://github.com/googleanalytics/google-analytics-super-proxy">https://github.com/googleanalytics/google-analytics-super-proxy</a> to your local.</p>
</li>
<li>
<p>Remove the first 2 lines in the <a href="https://github.com/googleanalytics/google-analytics-super-proxy/blob/master/src/app.yaml#L1-L2"><code>src/app.yaml</code>{: .filepath}</a> file:</p>
<pre class="language-diff"><code class="language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> application: your-project-id<br></span><span class="token prefix deleted">-</span><span class="token line"> version: 1</code></pre>
</li>
<li>
<p>In <code>src/config.py</code>{: .filepath}, add the <code>OAUTH_CLIENT_ID</code> and <code>OAUTH_CLIENT_SECRET</code> that you gathered from your App Engine Dashboard.</p>
</li>
<li>
<p>Enter any random key for <code>XSRF_KEY</code>, your <code>config.py</code>{: .filepath} should look similar to this</p>
<pre class="language-python"><code class="language-python"><span class="token comment">#!/usr/bin/python2.7</span><br><br>__author__ <span class="token operator">=</span> <span class="token string">'pete.frisella@gmail.com (Pete Frisella)'</span><br><br><span class="token comment"># OAuth 2.0 Client Settings</span><br>AUTH_CONFIG <span class="token operator">=</span> <span class="token punctuation">{</span><br>  <span class="token string">'OAUTH_CLIENT_ID'</span><span class="token punctuation">:</span> <span class="token string">'YOUR_CLIENT_ID'</span><span class="token punctuation">,</span><br>  <span class="token string">'OAUTH_CLIENT_SECRET'</span><span class="token punctuation">:</span> <span class="token string">'YOUR_CLIENT_SECRET'</span><span class="token punctuation">,</span><br>  <span class="token string">'OAUTH_REDIRECT_URI'</span><span class="token punctuation">:</span> <span class="token string">'%s%s'</span> <span class="token operator">%</span> <span class="token punctuation">(</span><br>    <span class="token string">'https://chirpy-test-XXXXXX.ue.r.appspot.com'</span><span class="token punctuation">,</span><br>    <span class="token string">'/admin/auth'</span><br>  <span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><br><span class="token comment"># XSRF Settings</span><br>XSRF_KEY <span class="token operator">=</span> <span class="token string">'OnceUponATimeThereLivedALegend'</span></code></pre>
<p>{: file=“src/config.py”}</p>
<blockquote>
<p>You can configure a custom domain instead of <code>https://PROJECT_ID.REGION_ID.r.appspot.com</code>.
But, for the sake of keeping it simple, we will be using the Google provided default URL.
{: .prompt-info }</p>
</blockquote>
</li>
<li>
<p>From inside the <code>src/</code>{: .filepath} directory, deploy the app</p>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">[</span>root@bc96abf71ef8 src<span class="token punctuation">]</span><span class="token comment"># gcloud app deploy</span><br>Services to deploy:<br><br>descriptor:      <span class="token punctuation">[</span>/tmp/google-analytics-super-proxy/src/app.yaml<span class="token punctuation">]</span><br>source:          <span class="token punctuation">[</span>/tmp/google-analytics-super-proxy/src<span class="token punctuation">]</span><br>target project:  <span class="token punctuation">[</span>chirpy-test-XXXX<span class="token punctuation">]</span><br>target service:  <span class="token punctuation">[</span>default<span class="token punctuation">]</span><br>target version:  <span class="token punctuation">[</span>VESRION_NUM<span class="token punctuation">]</span><br>target url:      <span class="token punctuation">[</span>https://chirpy-test-XXXX.ue.r.appspot.com<span class="token punctuation">]</span><br><br><br>Do you want to <span class="token builtin class-name">continue</span> <span class="token punctuation">(</span>Y/n<span class="token punctuation">)</span>? Y<br><br>Beginning deployment of <span class="token function">service</span> <span class="token punctuation">[</span>default<span class="token punctuation">]</span><span class="token punctuation">..</span>.<br>╔════════════════════════════════════════════════════════════╗<br>╠═ Uploading <span class="token number">1</span> <span class="token function">file</span> to Google Cloud Storage                 ═╣<br>╚════════════════════════════════════════════════════════════╝<br>File upload done.<br>Updating <span class="token function">service</span> <span class="token punctuation">[</span>default<span class="token punctuation">]</span><span class="token punctuation">..</span>.done.<br>Setting traffic <span class="token function">split</span> <span class="token keyword">for</span> <span class="token function">service</span> <span class="token punctuation">[</span>default<span class="token punctuation">]</span><span class="token punctuation">..</span>.done.<br>Deployed <span class="token function">service</span> <span class="token punctuation">[</span>default<span class="token punctuation">]</span> to <span class="token punctuation">[</span>https://chirpy-test-XXXX.ue.r.appspot.com<span class="token punctuation">]</span><br><br>You can stream logs from the <span class="token builtin class-name">command</span> line by running:<br>$ gcloud app logs <span class="token function">tail</span> <span class="token parameter variable">-s</span> default<br><br>To view your application <span class="token keyword">in</span> the web browser run:<br>$ gcloud app browse</code></pre>
</li>
<li>
<p>Visit the deployed service. Add a <code>/admin</code> to the end of the URL.</p>
</li>
<li>
<p>Click on <strong>Authorize Users</strong> and make sure to add yourself as a managed user.</p>
</li>
<li>
<p>If you get any errors, please Google it. The errors are self-explanatory and should be easy to fix.</p>
</li>
</ol>
<p>If everything went good, you’ll get this screen:</p>
<p><img src="/posts/20210103/03-superProxy-deployed.png" alt="superProxy-deployed">{: width=“1366” height=“354”}</p>
<h3 id="create-google-analytics-query" tabindex="-1">Create Google Analytics Query</h3>
<p>Head to <code>https://PROJECT_ID.REGION_ID.r.appspot.com/admin</code> and create a query after verifying the account. <strong>GA Core Reporting API</strong> query request can be created in <a href="https://ga-dev-tools.appspot.com/query-explorer/">Query Explorer</a>.</p>
<p>The query parameters are as follows:</p>
<ul>
<li><strong>start-date</strong>: fill in the first day of blog posting</li>
<li><strong>end-date</strong>: fill in <code>today</code> (this is a parameter supported by GA Report, which means that it will always end according to the current query date)</li>
<li><strong>metrics</strong>: select <code>ga:pageviews</code></li>
<li><strong>dimensions</strong>: select <code>ga:pagePath</code></li>
</ul>
<p>In order to reduce the returned results and reduce the network bandwidth, we add custom filtering rules <sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>:</p>
<ul>
<li>
<p><strong>filters</strong>: fill in <code>ga:pagePath=~^/posts/.*/$;ga:pagePath!@=</code>.</p>
<p>Among them, <code>;</code> means using <em>logical AND</em> to concatenate two rules.</p>
<p>If the <code>site.baseurl</code> is specified, change the first filtering rule to <code>ga:pagePath=~^/BASE_URL/posts/.*/$</code>, where <code>BASE_URL</code> is the value of <code>site.baseurl</code>.</p>
</li>
</ul>
<p>After <kbd>Run Query</kbd>, copy the generated contents of <strong>API Query URI</strong> at the bottom of the page and fill in the <strong>Encoded URI for the query</strong> of SuperProxy on GAE.</p>
<p>After the query is saved on GAE, a <strong>Public Endpoint</strong> (public access address) will be generated, and we will get the query result in JSON format when accessing it. Finally, click <kbd>Enable Endpoint</kbd> in <strong>Public Request Endpoint</strong> to make the query effective, and click <kbd>Start Scheduling</kbd> in <strong>Scheduling</strong> to start the scheduled task.</p>
<p><img src="/posts/20210103/04-superproxy-query.png" alt="superproxy-query">{: width=“1100” height=“126”}</p>
<h2 id="configure-chirpy-to-display-page-view" tabindex="-1">Configure Chirpy to Display Page View</h2>
<p>Once all the hard part is done, it is very easy to enable the Page View on Chirpy theme. Your superProxy dashboard should look something like below and you can grab the required values.</p>
<p><img src="/posts/20210103/05-superproxy-dashboard.png" alt="superproxy-dashboard">{: width=“1210” height=“694”}</p>
<p>Update the <code>_config.yml</code>{: .filepath} file of <a href="https://github.com/cotes2020/jekyll-theme-chirpy/"><strong>Chirpy</strong></a> project with the values from your dashboard, to look similar to the following:</p>
<pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">google_analytics</span><span class="token punctuation">:</span><br>  <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token string">'G-V6XXXXXXX'</span>   <span class="token comment"># fill in your Google Analytics ID</span><br>  <span class="token key atrule">pv</span><span class="token punctuation">:</span><br>    <span class="token key atrule">proxy_endpoint</span><span class="token punctuation">:</span> <span class="token string">'https://PROJECT_ID.REGION_ID.r.appspot.com/query?id=&lt;ID FROM SUPER PROXY>'</span><br>    <span class="token key atrule">cache_path</span><span class="token punctuation">:</span>       <span class="token comment"># the local PV cache data, friendly to visitors from GFW region</span></code></pre>
<p>{: file=“_config.yml”}</p>
<p>Now, you should see the Page View enabled on your blog.</p>
<h2 id="reference" tabindex="-1">Reference</h2>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><a href="https://developers.google.com/analytics/devguides/reporting/core/v3/reference#filters">Google Analytics Core Reporting API: Filters</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

        </section>

    </section>
     

                    </article>
                    <div class="article-tail">
                        
    
    <hr class="m-1" />

    <section class="further-reading">
        <h5 class="text-body-secondary">Further Reading</h5>
        <div class="post-navigation related-posts dynamic-headings">
    
	<div class="card post-preview">
		
		<a class="stretched-link" href="/post/the-equity-fallacy/"></a>

		<div class="card-body">

			<div class="card-text post-date">Nov 06, 2023</div>
			<div class="card-title post-title">The Equity Fallacy</div>
			<div class="card-text post-content">
				<p>In the fast-paced world of startups, the journey to success is fraught with uncertainties. Startling statistics reveal that <strong>only a mere 1% of startups manage to reach the coveted IPO stage</strong>, …</p>

			</div>
	
		</div>

	</div>	
    
	<div class="card post-preview">
		
		<a class="stretched-link" href="/post/the-critical-choice-picking-the-perfect-cto-archetype-for-your-business-startup/"></a>

		<div class="card-body">

			<div class="card-text post-date">Oct 31, 2023</div>
			<div class="card-title post-title">The Critical Choice - Picking the Perfect CTO Archetype for Your Business / Startup</div>
			<div class="card-text post-content">
				<!-- # The Critical Choice - Picking the Perfect CTO Archetype for Your Business / Startup -->
<p><strong>In a world where exceptional technical leadership can make or break a company, it's essential to consider the role of a Chief Technology Officer (CTO) with utmost care.</strong></p>
<p>Selecting the right …</p>

			</div>
	
		</div>

	</div>	
    
	<div class="card post-preview">
		
		<a class="stretched-link" href="/post/when-not-to-use-async-communication/"></a>

		<div class="card-body">

			<div class="card-text post-date">Nov 22, 2023</div>
			<div class="card-title post-title">When NOT to use Async Communication</div>
			<div class="card-text post-content">
				<p class>
  Following my "Story of staying in Prague" I realized that, in addition to understanding how to make asynchronous communication work for you, <span class="fw-bold">recognizing when not to use asynchronous communication …</span></p>
			</div>
	
		</div>

	</div>	
    
</div>
        


<section class="post-navigation prev-next">
    <div class="btn-group btn-group-block d-flex">
        <a class="btn btn-sm btn-outline-secondary disabled" prompt="Older"><div>-</div></a>
        
        <a class="btn btn-sm btn-outline-primary disabled" prompt="Newer"><div>-</div></a>
        </div>
</section>

    </section>

    <section class="d-hide-if-empty">
        
        
<div id="giscus" class="giscus">
    <p class="font-italic text-center text-body-secondary small">
        Comments powered by <a href="https://giscus.app/">Gisqus</a> - function requires cookie consent (see drawer at the bottom right corner)!
    </p>
</div>
<script>
    const consentRequired = true;
    const consentGiven = !!(CookieConsent.getStatus() == CookieConsent.StatusEnum.enabled);
    
    if (consentRequired == false || consentGiven) {
        const script = document.createElement('script');        
        script.src = 'https://giscus.app/client.js';
        script.dataset.repo = 'hidegh/hidegh.github.io.giscus';
        script.dataset.repoId = 'R_kgDOJWRxCQ';
        script.dataset.category = 'Comments';
        script.dataset.categoryId = 'DIC_kwDOJWRxCc4CVvXT';
        script.dataset.mapping = 'pathname';
        script.dataset.strict = '1';
        script.dataset.reactionsEnabled = '1';
        script.dataset.emitMetadata = '0';
        script.dataset.inputPosition = 'top';
        script.dataset.theme = 'dark';
        script.dataset.lang = 'en';
        script.setAttribute('crossorigin', 'anonymous');
        script.setAttribute('async', null);
        (document.head || document.body).appendChild(script);
    }
</script>


    </section>


                    </div>
                    <footer></footer>
                </section>

                <section class="aside-section d-none d-xl-flex col-xl-3">
                    <header></header>
                    <aside>

    <div class="sticky-container d-flex flex-column">

        <div non-sticky-heading></div>

        
        

        
        <section class="order-1 sticky p-3">
    <div class="heading">
        <div class="sticky-heading">Similar Articles</div>
        <a class="sticky-link"><i class="fa-solid fa-link"></i></a>
    </div>
    <div><ul class="aside-navigation related-posts">
    
    <li>
        
        <a href="/post/the-equity-fallacy/">
            <span>The Equity Fallacy</span>
        </a>
    </li>
    
    <li>
        
        <a href="/post/the-critical-choice-picking-the-perfect-cto-archetype-for-your-business-startup/">
            <span>The Critical Choice - Picking the Perfect CTO Archetype for Your Business / Startup</span>
        </a>
    </li>
    
    <li>
        
        <a href="/post/when-not-to-use-async-communication/">
            <span>When NOT to use Async Communication</span>
        </a>
    </li>
    
    <li>
        
        <a href="/post/effective-meeting-rules/">
            <span>Effective Meeting Rules</span>
        </a>
    </li>
    
    <li>
        
        <a href="/post/effective-async-communication-for-busy-leaders/">
            <span>Effective Async Communication for Busy Leaders</span>
        </a>
    </li>
    
</ul></div>
</section>

        
        <section class="order-2 sticky p-3">
    <div class="heading">
        <div class="sticky-heading">Recent Posts</div>
        <a class="sticky-link"><i class="fa-solid fa-link"></i></a>
    </div>
    <div>
<ul class="recent-posts">
    
    <li>
        <a href="/post/when-not-to-use-async-communication/">
            <span>When NOT to use Async Communication</span>
        </a>
    </li>
    
    <li>
        <a href="/post/effective-meeting-rules/">
            <span>Effective Meeting Rules</span>
        </a>
    </li>
    
    <li>
        <a href="/post/effective-async-communication-for-busy-leaders/">
            <span>Effective Async Communication for Busy Leaders</span>
        </a>
    </li>
    
    <li>
        <a href="/post/effective-email-management-for-busy-leaders/">
            <span>Effective Email Management for Busy Leaders</span>
        </a>
    </li>
    
    <li>
        <a href="/post/the-equity-fallacy/">
            <span>The Equity Fallacy</span>
        </a>
    </li>
    
</ul></div>
</section>

        
        <section class="order-3 sticky p-3">
    <div class="heading">
        <div class="sticky-heading">Tag Cloud</div>
        <a class="sticky-link"><i class="fa-solid fa-link"></i></a>
    </div>
    <div><div class="ps-3">
 
    <span style="font-size: 0.8em;">
        <a href="/tag/avoid-failures/1/">avoid-failures</a>
    </span>
 
    <span style="font-size: 1.8em;">
        <a href="/tag/ceos/1/">CEOs</a>
    </span>
 
    <span style="font-size: 0.8em;">
        <a href="/tag/chat/1/">chat</a>
    </span>
 
    <span style="font-size: 0.8em;">
        <a href="/tag/classification/1/">classification</a>
    </span>
 
    <span style="font-size: 1.3em;">
        <a href="/tag/efficiency/1/">efficiency</a>
    </span>
 
    <span style="font-size: 0.8em;">
        <a href="/tag/emails/1/">emails</a>
    </span>
 
    <span style="font-size: 1.8em;">
        <a href="/tag/entrepreneurship/1/">entrepreneurship</a>
    </span>
 
    <span style="font-size: 0.8em;">
        <a href="/tag/founder/1/">founder</a>
    </span>
 
    <span style="font-size: 1.6333333333333333em;">
        <a href="/tag/founders/1/">founders</a>
    </span>
 
    <span style="font-size: 0.8em;">
        <a href="/tag/hr/1/">HR</a>
    </span>
 
    <span style="font-size: 1.1333333333333333em;">
        <a href="/tag/linkedin/1/">linkedIn</a>
    </span>
 
    <span style="font-size: 1.3em;">
        <a href="/tag/management/1/">management</a>
    </span>
 
    <span style="font-size: 0.8em;">
        <a href="/tag/meetings/1/">meetings</a>
    </span>
 
    <span style="font-size: 1.8em;">
        <a href="/tag/posts/1/">posts</a>
    </span>
 
    <span style="font-size: 1.1333333333333333em;">
        <a href="/tag/productivity-hacks/1/">productivity-hacks</a>
    </span>
 
    <span style="font-size: 1.8em;">
        <a href="/tag/smes/1/">SMEs</a>
    </span>
 
    <span style="font-size: 0.9666666666666667em;">
        <a href="/tag/softwareengineering/1/">softwareengineering</a>
    </span>
 
    <span style="font-size: 1.8em;">
        <a href="/tag/startups/1/">startups</a>
    </span>
 
    <span style="font-size: 1.1333333333333333em;">
        <a href="/tag/team-setup/1/">team-setup</a>
    </span>
 
    <span style="font-size: 1.1333333333333333em;">
        <a href="/tag/tips/1/">tips</a>
    </span>

</div></div>
</section>

        
        <section class="order-last sticky p-3">
    <div class="heading">
        <div class="sticky-heading">Table of Contents</div>
        <a class="sticky-link"><i class="fa-solid fa-link"></i></a>
    </div>
    <div><div class="text-nowrap overflow-hidden"><nav class="toc">
                <ol>
                    
                    <li><a href="#set-up-google-analytics">Set up Google Analytics</a>
            
                <ol>
                    
                    <li><a href="#create-ga-account-and-property">Create GA account and property</a>
            		</li>

                    <li><a href="#create-data-stream">Create Data Stream</a>
            		</li>
                </ol>
            		</li>

                    <li><a href="#setup-page-views">Setup Page Views</a>
            
                <ol>
                    
                    <li><a href="#setup-google-app-engine">Setup Google App Engine</a>
            		</li>

                    <li><a href="#setup-google-analytics-superproxy">Setup Google Analytics superProxy</a>
            		</li>

                    <li><a href="#create-google-analytics-query">Create Google Analytics Query</a>
            		</li>
                </ol>
            		</li>

                    <li><a href="#configure-chirpy-to-display-page-view">Configure Chirpy to Display Page View</a>
            		</li>

                    <li><a href="#reference">Reference</a>
            		</li>
                </ol>
            </nav></div></div>
</section>

    </div>

</aside>
                    <footer></footer>
                </section>

            </div>

            <div class="hide-if-search-results-container-is-displayed row">
                <!-- Add tail here? Looks weird if aside content is long! -->
                
            </div>

            <div class="search-results-container row">
                <div class="search-results-wrapper overflow-hidden"></div>
            </div>

        </div>

    </div>


        </main>

	    <!-- dynamic & custom scripts to alter rendered content -->
        <script>

    /* uses:
    EJS.CO for templating
    LUNR for search
    HE for HTML encoding (at highlight fnc.)
    */
   
    class Debouncer {
        _timeoutId = undefined;
        _wait = 250;
        _callback;

        constructor(callback, wait) {
            this._wait = wait ? wait : this._wait;
            this._callback = callback;
        }

        next(...args) {
            this.cancel();
            this._timeoutId = window.setTimeout(() => {
            this._callback.apply(null, args);
            }, this._wait);
        }

        cancel() {
            window.clearTimeout(this._timeoutId);
        }
    }

    const blogSearch = {

        _searchIndexPath: '/search.json',
        _urlPrefix: '/',
        _debounceTime: 400,

        _searchingTemplate: `
<h2>
    <i class="fa-solid fa-circle-notch fa-spin text-secondary"></i>
    <span class="text-secondary">Searching for:</span>
    <span class="text-primary"><%= searchText %></span>
</h2>
`,

        _resultTemplate_simple: `
<h2>
    <span class="text-secondary">Search results for:</span>
    <span class="text-primary"><%= searchText %></span>
</h2>

<% if (searchResults.length == 0){ %>
    <span class="no-results">We're sorry, but we couldn't find any items that match your search. Please try again with different keywords or filters...</span>
<% } %>

<ul class="items-found">
<% searchResults.forEach((sr, idx, arr) => { %>
    <li>
        <div class="search-result-item position-relative border shadow">
            <h5><%- sr.ref.title %></h5>
            <p class="x-text-nowrap x-text-truncate"><%- sr.ref.summary %></p>
            <a href="<%- urlPrefix %><%- sr.ref.url %>" class="stretched-link"></a>
        </div>
    </li>
<% }); %>
</ul>        
`,

        _resultTemplate: `
<h2>
    <span class="text-secondary">Search results for:</span>
    <span class="text-primary"><%= searchText %></span>
</h2>

<% if (searchResults.length == 0){ %>
    <span class="no-results">We're sorry, but we couldn't find any items that match your search. Please try again with different keywords or filters...</span>
<% } %>

<ul class="search-results">
<% searchResults.forEach((sr, idx, arr) => { %>
    <li>

        <div class="catalogue-item position-relative">
            
            <a class="stretched-link" href="<%- urlPrefix %><%- sr.ref.url %>"></a>
            <h3 class="catalogue-title"><%- sr.ref.title %></h3>
            <div class="catalogue-line"></div>

            <div class="catalogue-preview clearfix">
                <% if (sr.ref.image) { %>
                <img src="<%- sr.ref.image %>" class="catalogue-image img-fluid img-thumbnail"></img>
                <% } %>
                <div class="excerpt">
                    <%- sr.ref.summary %>
                </div>
            </div>

        </div>

    </li>
<% }); %>
</ul>        
`,

        _inputElements: [],
        _cancelElements: [],
        
        _updateInputs(value) {
            this._inputElements.forEach(el => el.value = value);
        },

        _setUpListeners(inputSelector, cancelSelector) {
            if (inputSelector) {
                this._inputElements = document.querySelectorAll(inputSelector);
                this._inputElements.forEach(el => el.addEventListener('keyup', evt => { if (evt.keyCode == 27) this._escapePressed(el); else this._inputValueChanged(el); } ));
            } else {
                this._inputElements = [];
            }

            if (cancelSelector) {
                this._cancelElements = document.querySelectorAll(cancelSelector);
            } else {
                this._cancelElements = [];
            }
        },

        _escapePressed(el) {
            this.clearSearch();
        },

        _inputValueChanged(el) {
            const value = el.value;
            this._updateInputs(value);
            this._debouncedSearch.next(value);
        },

        _resultContainerEls: [],
        _containersToHideEls: [],

        _setUpContainers(resultContainerSelector, containersToHideWhenResultSelector) {
            this._resultContainerEls = document.querySelectorAll(resultContainerSelector);
            this._containersToHideEls = document.querySelectorAll(containersToHideWhenResultSelector);
        },

        _showResults: false,
        _searching: false,
        _searchText: '',
        _searchResults: [],

        refreshUi() {
            const self = this;

            self._inputElements.forEach(el => el.value = self._searchText );

            const html = self._showResults
                ? self._searching
                    ? ejs.render(self._searchingTemplate, { searchText: self._searchText })
                    : ejs.render(self._resultTemplate, { urlPrefix: self._urlPrefix.replace(/\/+$/, ''), searchText: self._searchText, searchResults: self._searchResults })
                : '';

            self._resultContainerEls.forEach(el => { 
                // hide/show container
                self._showResults ? el.classList.remove("d-none") : el.classList.add("d-none")
                
                // find results element (or fallback to container) and set results
                const resultsEl = el.querySelector(".search-results-wrapper");
                const displayEl = resultsEl ?? el;
                displayEl.innerHTML = self._showResults ? html : "";
            });

            self._containersToHideEls.forEach(el => self._showResults ? el.classList.add("d-none") : el.classList.remove("d-none"));          
        },

        clearSearch() {
            this._showResults = false;
            this._searchText = '';
            this._searchResults = [];
            this.refreshUi();
        },

        search(text) {

            const self = this;

            console.log('searching for: ', text);
            self._searchText = text;

            if (!text) {
                self.clearSearch();
                return;
            }

            this._searchResults = [];
            self._searching = true;
            self._showResults = true;
            this.refreshUi();

            const hasSpecial = self._lunrSpecial.some(special => text.includes(special));
            const pattern =  hasSpecial 
                ? text
                : text + "*";

            console.log('lunr pattern: ', pattern);
            const localResults = self._lunrEngine.search(pattern);

            // NOTE: just for tests...
            // console.log('total result', localResults)

            // NOTE: highlighting
            localResults.forEach(localResult => {
                // NOTE: hard. ref.
                const data = self._lunrSearchData.find(i => i.url == localResult.ref);

                const highlight = {};

                for (let term in localResult.matchData.metadata) {
                    for (let field in localResult.matchData.metadata[term]) {

                        const positions = localResult.matchData.metadata[term][field].position;

                        const fieldValue = data[field];
                        let fieldReadIndex = 0;

                        highlight[field] = "";

                        for (let position of positions) {

                            if (position[0] > fieldReadIndex)
                                highlight[field] += fieldValue.substring(fieldReadIndex, position[0]);

                            highlight[field] += ("{:::" + fieldValue.substring(position[0], position[0] + position[1]) + ":::}");

                            fieldReadIndex = position[0] + position[1];

                        }

                        highlight[field] += fieldValue.substring(fieldReadIndex);             

                    }

                }

                for (let key in highlight) {
                    let value = highlight[key];

                    const encode = false;
                    let encoded = encode
                        ? he.encode(value)
                        : value;

                    let highlighted = encoded.replace(/{:::/g, '<mark>').replace(/:::}/g, '</mark>');
                    highlight[key] = highlighted;
                }

                localResult.ref = Object.assign({}, data, highlight);
            });

            self._searchResults = localResults;

            // finally
            self._searching = false;
            self.refreshUi();
        },

        _lunrSpecial: "*+-:^~".split(''),
        _lunrSearchData: undefined,
        _lunrEngine: undefined,

        init(inputSelector, cancelSelector, resultContainerSelector, containersToHideWhenResultSelector) {

            console.log('initializing search', this);

            // set up result / hide elements
            this._setUpContainers(resultContainerSelector, containersToHideWhenResultSelector);

            // refresh
            this.refreshUi();

            fetch(this._searchIndexPath).then((response) => {
                response.json().then((raw) => {

                    // set up engine, store search data
                    this._lunrSearchData = raw;

                    this._lunrEngine = lunr(function () {
                        this.ref('url')
                        this.field('title')
                        this.field('date')
                        this.field('author')
                        this.field('summary')
                        this.field('text')

                        this.metadataWhitelist = ['position']

                        raw.forEach(function (doc) { this.add(doc) }, this)
                    });

                    // set up UI listeners
                    this._debouncedSearch = new Debouncer((args) => this.search(args), this._debounceTime);
                    this._setUpListeners(inputSelector, cancelSelector);

                    // refresh
                    this.refreshUi();
                });
            });

        }

    };

    // NOTE:
    // #search-results-container must have an additional element with a .search-results class
    // these objects (along with #global-content-view) were already set up inside main.njk
    blogSearch.init('.blog-search-input', '.blog-search-cancel', '.search-results-container', '.hide-if-search-results-container-is-displayed');

</script>


        

        


        <!-- cookie consent dependent scripts and features -->
        
<!-- based on Jekyll - Chirpy + extension to support CC -->
<script defer src="https://www.googletagmanager.com/gtag/js?id=G-WF12VBK55W"></script>

<script>
    function loadGA(anonymizeIp) {

        console.log('loaging GA...')

        document.addEventListener("DOMContentLoaded", function (event) {
            window.dataLayer = window.dataLayer || [];
            function gtag() { dataLayer.push(arguments); }

            gtag('js', new Date());

            /*
            Note:
            Without an opt-in consent, we need to use anonymization.
            In general we should avoid collecting personal data.
            Here we can do the usual if/then branching if we still decide to collect personal data (yes, even a generated USER_ID or IP counts as such)!
      
            On the other hand, by using tools like Disqus, we need to notify user that:
            - cookies are used
            - and that 3rd party might store private data
            - ...but the user itself is in full control over those data - via the Disqus platform
            */
            options = {};

            if (anonymizeIp) options['anonymize_ip'] = true;

            gtag('config', 'G-WF12VBK55W', options);
        });
    }

    (function () {
        
        const consentRequired = !!true;
        const anonymizeIp = !!true;

        if (consentRequired == false) {
            loadGA(anonymizeIp);
        } else {
            switch (CookieConsent.getStatus()) {
                case CookieConsent.StatusEnum.enabled:
                    loadGA(anonymizeIp);
                    break;
                default:
                    // no consent given (or no answer ~ default) - we need to anonymize IP
                    loadGA(true);
                    break;
            }
        }
  
    })();
</script>


    </body>

    <!-- dynamic & custom scripts that need to run after the entire "final" content is rendered -->
    <script src="/assets/js/custom/d-hide-if-empty.js"></script>
    <script src="/assets/js/custom/sticky.js"></script>

    <!-- scripts from content pages -->
    

    <script src="/assets/js/custom/menu-path-and-scroll-spy.js"></script>

</html>
